{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./KioskMonitor.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://localhost:3001';function KioskMonitor(_ref){let{kioskId}=_ref;const[monitorData,setMonitorData]=useState(null);const[error,setError]=useState(null);useEffect(()=>{const fetchMonitorData=async()=>{try{const response=await axios.get(\"\".concat(API_URL,\"/api/monitor\"));setMonitorData(response.data);setError(null);}catch(err){setError('Failed to fetch monitor data');console.error('Monitor error:',err);}};fetchMonitorData();const interval=setInterval(fetchMonitorData,5000);// Update every 5 seconds\nreturn()=>clearInterval(interval);},[]);if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"monitor-error\",children:error});if(!monitorData)return/*#__PURE__*/_jsx(\"div\",{className:\"monitor-loading\",children:\"Loading monitor...\"});const formatUptime=seconds=>{const hours=Math.floor(seconds/3600);const minutes=Math.floor(seconds%3600/60);return\"\".concat(hours,\"h \").concat(minutes,\"m\");};const formatMemory=bytes=>{return\"\".concat((bytes/1024/1024).toFixed(1),\" MB\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"kiosk-monitor\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"monitor-close\",onClick:()=>window.location.reload(),children:\"\\u2715\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"System Monitor - \",kioskId]}),/*#__PURE__*/_jsxs(\"div\",{className:\"monitor-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-group\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Queue Status\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Queue Size: \",monitorData.queueSize]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Processing: \",monitorData.queuePending]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-group\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Server Status\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Uptime: \",formatUptime(monitorData.serverUptime)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Memory: \",formatMemory(monitorData.memoryUsage.heapUsed)]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"kiosk-stats\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Kiosk Statistics\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Kiosk\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Success\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Failed\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Rate\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Active\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.entries(monitorData.kiosks).map(_ref2=>{let[id,stats]=_ref2;return/*#__PURE__*/_jsxs(\"tr\",{className:id===kioskId?'current-kiosk':'',children:[/*#__PURE__*/_jsx(\"td\",{children:id}),/*#__PURE__*/_jsx(\"td\",{children:stats.total}),/*#__PURE__*/_jsx(\"td\",{children:stats.completed}),/*#__PURE__*/_jsx(\"td\",{children:stats.failed}),/*#__PURE__*/_jsx(\"td\",{children:stats.total>0?\"\".concat((stats.completed/stats.total*100).toFixed(0),\"%\"):'-'}),/*#__PURE__*/_jsx(\"td\",{children:stats.lastActive?new Date(stats.lastActive).toLocaleTimeString():'-'})]},id);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recent-sessions\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Recent Sessions\"}),/*#__PURE__*/_jsx(\"div\",{className:\"session-list\",children:monitorData.recentSessions.slice(0,10).map(session=>/*#__PURE__*/_jsxs(\"div\",{className:\"session-item session-\".concat(session.status),children:[/*#__PURE__*/_jsx(\"span\",{children:session.kioskId}),/*#__PURE__*/_jsx(\"span\",{children:session.status}),/*#__PURE__*/_jsx(\"span\",{children:new Date(session.startTime).toLocaleTimeString()}),session.duration&&/*#__PURE__*/_jsxs(\"span\",{children:[(session.duration/1000).toFixed(1),\"s\"]})]},session.id))})]})]});}export default KioskMonitor;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","API_URL","process","env","REACT_APP_API_URL","KioskMonitor","_ref","kioskId","monitorData","setMonitorData","error","setError","fetchMonitorData","response","get","concat","data","err","console","interval","setInterval","clearInterval","className","children","formatUptime","seconds","hours","Math","floor","minutes","formatMemory","bytes","toFixed","onClick","window","location","reload","queueSize","queuePending","serverUptime","memoryUsage","heapUsed","Object","entries","kiosks","map","_ref2","id","stats","total","completed","failed","lastActive","Date","toLocaleTimeString","recentSessions","slice","session","status","startTime","duration"],"sources":["/Users/nishantfernandez/Desktop/NodeProjects/marathon-photobooth/frontend/src/components/KioskMonitor.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './KioskMonitor.css';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001';\n\nfunction KioskMonitor({ kioskId }) {\n  const [monitorData, setMonitorData] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchMonitorData = async () => {\n      try {\n        const response = await axios.get(`${API_URL}/api/monitor`);\n        setMonitorData(response.data);\n        setError(null);\n      } catch (err) {\n        setError('Failed to fetch monitor data');\n        console.error('Monitor error:', err);\n      }\n    };\n\n    fetchMonitorData();\n    const interval = setInterval(fetchMonitorData, 5000); // Update every 5 seconds\n\n    return () => clearInterval(interval);\n  }, []);\n\n  if (error) return <div className=\"monitor-error\">{error}</div>;\n  if (!monitorData) return <div className=\"monitor-loading\">Loading monitor...</div>;\n\n  const formatUptime = (seconds) => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    return `${hours}h ${minutes}m`;\n  };\n\n  const formatMemory = (bytes) => {\n    return `${(bytes / 1024 / 1024).toFixed(1)} MB`;\n  };\n\n  return (\n    <div className=\"kiosk-monitor\">\n      <button \n        className=\"monitor-close\" \n        onClick={() => window.location.reload()}\n      >\n        âœ•\n      </button>\n      \n      <h2>System Monitor - {kioskId}</h2>\n      \n      <div className=\"monitor-stats\">\n        <div className=\"stat-group\">\n          <h3>Queue Status</h3>\n          <p>Queue Size: {monitorData.queueSize}</p>\n          <p>Processing: {monitorData.queuePending}</p>\n        </div>\n        \n        <div className=\"stat-group\">\n          <h3>Server Status</h3>\n          <p>Uptime: {formatUptime(monitorData.serverUptime)}</p>\n          <p>Memory: {formatMemory(monitorData.memoryUsage.heapUsed)}</p>\n        </div>\n      </div>\n      \n      <div className=\"kiosk-stats\">\n        <h3>Kiosk Statistics</h3>\n        <table>\n          <thead>\n            <tr>\n              <th>Kiosk</th>\n              <th>Total</th>\n              <th>Success</th>\n              <th>Failed</th>\n              <th>Rate</th>\n              <th>Last Active</th>\n            </tr>\n          </thead>\n          <tbody>\n            {Object.entries(monitorData.kiosks).map(([id, stats]) => (\n              <tr key={id} className={id === kioskId ? 'current-kiosk' : ''}>\n                <td>{id}</td>\n                <td>{stats.total}</td>\n                <td>{stats.completed}</td>\n                <td>{stats.failed}</td>\n                <td>{stats.total > 0 ? `${((stats.completed / stats.total) * 100).toFixed(0)}%` : '-'}</td>\n                <td>{stats.lastActive ? new Date(stats.lastActive).toLocaleTimeString() : '-'}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n      \n      <div className=\"recent-sessions\">\n        <h3>Recent Sessions</h3>\n        <div className=\"session-list\">\n          {monitorData.recentSessions.slice(0, 10).map((session) => (\n            <div key={session.id} className={`session-item session-${session.status}`}>\n              <span>{session.kioskId}</span>\n              <span>{session.status}</span>\n              <span>{new Date(session.startTime).toLocaleTimeString()}</span>\n              {session.duration && <span>{(session.duration / 1000).toFixed(1)}s</span>}\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default KioskMonitor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}